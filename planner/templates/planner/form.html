{% if not meal.id %}
<!-- Trigger button -->
<div class="flex justify-center mt-6">
    <button command="show-modal" commandfor="meal-form-dialog" class="px-6 py-3 bg-[#5B4BFF] text-white font-semibold rounded-lg 
               shadow hover:bg-[#4a3be6] transition">
    Add Meal
</button>
</div>

<el-dialog>
  <dialog id="meal-form-dialog"
          aria-labelledby="meal-form-title"
          class="fixed inset-0 size-auto max-h-none max-w-none overflow-y-auto bg-transparent backdrop:bg-transparent">

    <!-- BACKDROP -->
    <el-dialog-backdrop
      class="fixed inset-0 bg-gray-500/75 transition-opacity 
            data-closed:opacity-0 
            data-enter:duration-300 data-enter:ease-out 
            data-leave:duration-200 data-leave:ease-in">
    </el-dialog-backdrop>

    <!-- PANEL -->
    <div tabindex="0"
         class="flex min-h-full items-end justify-center p-4 text-center focus:outline-none sm:items-center sm:p-0">

      <el-dialog-panel
        class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all 
               data-closed:translate-y-4 data-closed:opacity-0 
               data-enter:duration-300 data-enter:ease-out 
               data-leave:duration-200 data-leave:ease-in 
               sm:my-8 sm:w-full sm:max-w-lg 
               data-closed:sm:translate-y-0 data-closed:sm:scale-95">

        <!-- HEADER -->
        <div class="bg-white px-6 py-4">
          <h3 id="meal-form-title" class="text-lg font-semibold text-gray-900">
            Add Meal
          </h3>
        </div>

        <!-- FORM -->
        <form method="POST" action="{% url 'planner:add_meal' %}" class="px-6 pb-4 space-y-4">
          <!-- If using Django -->
          {% csrf_token %}

          <div>
            <label class="block text-sm font-medium text-gray-700">Meal Name</label>
            <input id="modal-meal-name" name="name" type="text"
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-600 focus:ring-indigo-600"
                   placeholder="Chicken & Rice" required>
          </div>
          
        <div class="sm:col-span-3">
          <label for="week_day" class="block text-sm/6 font-medium text-gray-900">Week Day</label>
          <div class="mt-2 grid grid-cols-1">
            <select id="week_day" name="week_day" autocomplete="week-day" class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
              <option value="monday">Monday</option>
              <option value="tuesday">Tuesday</option>
              <option value="wednesday">Wednesday</option>
              <option value="thursday">Thursday</option>
              <option value="friday">Friday</option>
              <option value="saturday">Saturday</option>
              <option value="sunday">Sunday</option>
            </select>
            <svg viewBox="0 0 16 16" fill="currentColor" data-slot="icon" aria-hidden="true" class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4">
              <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
            </svg>
          </div>
        </div>

        <div class="sm:col-span-3">
          <label for="meal_type" class="block text-sm/6 font-medium text-gray-900">Meal Type</label>
          <div class="mt-2 grid grid-cols-1">
            <select id="meal_type" name="meal_type" autocomplete="meal_type" class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
              <option value="1">Breakfast</option>
              <option value="2">Lunch</option>
              <option value="3">Dinner</option>
              <option value="4">Snacks</option>
            </select>
            <svg viewBox="0 0 16 16" fill="currentColor" data-slot="icon" aria-hidden="true" class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4">
              <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
            </svg>
          </div>
        </div>

        <fieldset>
          <legend class="text-sm/6 font-semibold text-gray-900">Taste</legend>
          <p class="mt-1 text-sm/6 text-gray-600">These are the tastes you can choose.</p>
          <div class="mt-6 space-y-6">
            <div class="flex items-center gap-x-3">
              <input id="sweet" type="radio" name="taste" value="1" checked class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
              <label for="sweet" class="block text-sm/6 font-medium text-gray-900">Sweet</label>
            </div>
            <div class="flex items-center gap-x-3">
              <input id="savoury" type="radio" name="taste" value="2" class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
              <label for="savoury" class="block text-sm/6 font-medium text-gray-900">Savoury</label>
            </div>
          </div>
        </fieldset>

        <fieldset>
          <legend class="text-sm/6 font-semibold text-gray-900">Servings</legend>
          <p class="mt-1 text-sm/6 text-gray-600">These are the servings you can choose.</p>
          <div class="mt-6 space-y-6">
            <div class="flex items-center gap-x-3">
              <input id="1-servings" type="radio" name="servings" value="1" checked class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
              <label for="1-servings" class="block text-sm/6 font-medium text-gray-900">1 Servings</label>
            </div>
            <div class="flex items-center gap-x-3">
              <input id="2-servings" type="radio" name="servings" value="2" class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
              <label for="2-servings" class="block text-sm/6 font-medium text-gray-900">2 Servings</label>
            </div>
            <div class="flex items-center gap-x-3">
              <input id="3-servings" type="radio" name="servings" value="3" class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
              <label for="3-servings" class="block text-sm/6 font-medium text-gray-900">3 Servings</label>
            </div>
          </div>
        </fieldset>

        
          <div>
            <label class="block text-sm font-medium text-gray-700">Notes</label>
            <textarea name="notes"
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-600 focus:ring-indigo-600"
                      rows="3"></textarea>
          </div> 

          <!-- FOOTER BUTTONS -->
          <div class="bg-gray-50 px-6 py-3 sm:flex sm:flex-row-reverse">
            <button type="submit"
                    class="inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 sm:ml-3 sm:w-auto">
              Save Meal
            </button>

            <button type="button" command="close" commandfor="meal-form-dialog"
                    class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs inset-ring inset-ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">
              Cancel
            </button>
          </div>
        </form>

      </el-dialog-panel>
    </div>
  </dialog>
</el-dialog>

{% else %}
        <div class="bg-white px-6 py-4">
            <h3 id="meal-form-title" class="text-lg font-semibold text-gray-900">
            Edit  Meal
            </h3>
        </div>
 <!-- FORM -->
        <form method="POST" action="{% if meal.id %}{% url 'planner:edit_meal' meal.id %}{% else %}{% url 'planner:add_meal' %}{% endif %}" class="px-6 pb-4 space-y-4">
          <!-- If using Django -->
          {% csrf_token %}

          <div>
            <label class="block text-sm font-medium text-gray-700">Meal Name</label>
            <input  name="name" type="text" value="{{meal.name}}"
                   class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-600 focus:ring-indigo-600"
                   placeholder="Chicken & Rice" required>
          </div>
          
        <div class="sm:col-span-3">
          <label for="week_day" class="block text-sm/6 font-medium text-gray-900">Week Day</label>
          <div class="mt-2 grid grid-cols-1">
            <select id="week_day" name="week_day" autocomplete="week-day" class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
              <option value="monday" {% if meal.week_day|lower ==  "monday" %}selected{% endif %}>Monday</option>
              <option value="tuesday" {% if meal.week_day|lower ==  "tuesday" %}selected{% endif %}>Tuesday</option>
              <option value="wednesday" {% if meal.week_day|lower ==  "wednesday" %}selected{% endif %}>Wednesday</option>
              <option value="thursday" {% if meal.week_day|lower ==  "thursday" %}selected{% endif %}>Thursday</option>
              <option value="friday" {% if meal.week_day|lower ==  "friday" %}selected{% endif %}>Friday</option>
              <option value="saturday" {% if meal.week_day|lower ==  "saturday" %}selected{% endif %}>Saturday</option>
              <option value="sunday" {% if meal.week_day|lower ==  "sunday" %}selected{% endif %}>Sunday</option>
            </select>
            <svg viewBox="0 0 16 16" fill="currentColor" data-slot="icon" aria-hidden="true" class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4">
              <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
            </svg>
          </div>
        </div>

        <div class="sm:col-span-3">
          <label for="type" class="block text-sm/6 font-medium text-gray-900">Meal Type</label>
          <div class="mt-2 grid grid-cols-1">
            <select id="type" name="type" autocomplete="type" class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pr-8 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6">
              <option value="1" {% if meal.type|lower ==  "1" %}selected{% endif %}>Breakfast</option>
              <option value="2" {% if meal.type|lower ==  "2" %}selected{% endif %}>Lunch</option>
              <option value="3" {% if meal.type|lower ==  "3" %}selected{% endif %}>Dinner</option>
              <option value="4" {% if meal.type|lower ==  "4" %}selected{% endif %}>Snacks</option>
            </select>
            <svg viewBox="0 0 16 16" fill="currentColor" data-slot="icon" aria-hidden="true" class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4">
              <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
            </svg>
          </div>
        </div>

        <fieldset>
          <legend class="text-sm/6 font-semibold text-gray-900">Taste</legend>
          <p class="mt-1 text-sm/6 text-gray-600">These are the tastes you can choose.</p>
          <div class="mt-6 space-y-6">
            <div class="flex items-center gap-x-3">
              <input id="sweet" type="radio" name="taste" value="1" {% if meal.taste|lower ==  "1" %}checked{% endif %} class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
              <label for="sweet" class="block text-sm/6 font-medium text-gray-900">Sweet</label>
            </div>
            <div class="flex items-center gap-x-3">
              <input id="savoury" type="radio" name="taste" value="2" {% if meal.taste|lower ==  "2" %}checked{% endif %} class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
              <label for="savoury" class="block text-sm/6 font-medium text-gray-900">Savoury</label>
            </div>
          </div>
        </fieldset>

        <fieldset>
          <legend class="text-sm/6 font-semibold text-gray-900">Servings</legend>
          <p class="mt-1 text-sm/6 text-gray-600">These are the servings you can choose.</p>
          <div class="mt-6 space-y-6">
            <div class="flex items-center gap-x-3">
              <input id="1-servings" type="radio" name="servings" value="1"  {% if meal.taste|lower ==  "1" %}checked{% endif %} class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
              <label for="1-servings" class="block text-sm/6 font-medium text-gray-900">1 Servings</label>
            </div>
            <div class="flex items-center gap-x-3">
              <input id="2-servings" type="radio" name="servings" value="2"  {% if meal.taste|lower ==  "2" %}checked{% endif %} class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
              <label for="2-servings" class="block text-sm/6 font-medium text-gray-900">2 Servings</label>
            </div>
            <div class="flex items-center gap-x-3">
              <input id="3-servings" type="radio" name="servings" value="3"  {% if meal.taste|lower ==  "3" %}checked{% endif %} class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white not-checked:before:hidden checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 forced-colors:appearance-auto forced-colors:before:hidden" />
              <label for="3-servings" class="block text-sm/6 font-medium text-gray-900">3 Servings</label>
            </div>
          </div>
        </fieldset>

        
          <div>
            <label class="block text-sm font-medium text-gray-700">Notes</label>
            <textarea name="notes"
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-600 focus:ring-indigo-600"
                      rows="3">{{meal.notes}}</textarea>
          </div> 

          <!-- FOOTER BUTTONS -->
          <div class="bg-gray-50 px-6 py-3 sm:flex sm:flex-row-reverse">
            <button type="submit"
                    class="inline-flex w-full justify-center rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 sm:ml-3 sm:w-auto">
              Save Meal
            </button>

            <a href="{% url 'planner:meal' meal.week_day %}">
                <button type="button" 
                        class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs inset-ring inset-ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">
                Cancel
                </button>
            </a>
          </div>
        </form>
{% endif %}